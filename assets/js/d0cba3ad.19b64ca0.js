"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1462],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(r),u=o,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||a;return r?n.createElement(h,s(s({ref:t},c),{},{components:r})):n.createElement(h,s({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7071:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=r(7462),o=(r(7294),r(3905));const a={title:"AWS Context",position:3,description:"See more about the AWS Context Resolver."},s=void 0,i={unversionedId:"main/resolvers/aws-context",id:"main/resolvers/aws-context",title:"AWS Context",description:"See more about the AWS Context Resolver.",source:"@site/docs/main/resolvers/aws-context.mdx",sourceDirName:"main/resolvers",slug:"/main/resolvers/aws-context",permalink:"/docs/main/resolvers/aws-context",draft:!1,editUrl:"https://github.com/H4ad/serverless-adapter/tree/main/www/docs/main/resolvers/aws-context.mdx",tags:[],version:"current",frontMatter:{title:"AWS Context",position:3,description:"See more about the AWS Context Resolver."},sidebar:"main",previous:{title:"Resolvers",permalink:"/docs/category/resolvers"},next:{title:"Callback",permalink:"/docs/main/resolvers/callback"}},l={},p=[],c={toc:p},d="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Don't know what a resolver is? See the ",(0,o.kt)("a",{parentName:"p",href:"../architecture#resolver"},"Architecture")," section.")),(0,o.kt)("admonition",{title:"Deprecated",type:"note"},(0,o.kt)("p",{parentName:"admonition"},"From the AWS Documentation, describing the functions used in this resolver: Functions for compatibility with earlier Node.js Runtime v0.10.42. No longer documented, so they are deprecated, but they still work as of the 12.x runtime, so they are not removed from the types.")),(0,o.kt)("p",null,"This resolver only works in AWS and it was created just to be fully compatible with the resolution mode of ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/vendia/serverless-express/blob/mainline/src/make-resolver.js#L9"},"@vendia/serverless-express"),"."),(0,o.kt)("p",null,"When the handler is created with ",(0,o.kt)("a",{parentName:"p",href:"../../api/Contracts/HandlerContract#method-gethandler"},"getHandler"),", it will return void\nand the cloud will wait until the event loop is empty.\nThis happens when your framework sends the response and the adapter transforms the response the way your cloud can handle,\nat this point the response will be passed to the functions ",(0,o.kt)("inlineCode",{parentName:"p"},"succeed")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"fail")," that is exposed by ",(0,o.kt)("inlineCode",{parentName:"p"},"context")," object."),(0,o.kt)("p",null,"You can use this resolver only with AWS."),(0,o.kt)("admonition",{title:"AWS",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"To use this resolver on AWS, you MUST leave ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/lambda/latest/dg/nodejs-context.html"},"callbackWaitsForEmptyEventLoop")," as true, otherwise, AWS will not wait for this resolver to resolve.")),(0,o.kt)("h1",{id:"usage"},"Usage"),(0,o.kt)("p",null,"To use, you can import and call the method ",(0,o.kt)("a",{parentName:"p",href:"../../api/ServerlessAdapter#method-setresolver"},"setResolver"),", as per the code below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="index.ts"',title:'"index.ts"'},"import { ServerlessAdapter } from '@h4ad/serverless-adapter';\nimport { AwsContextResolver } from '@h4ad/serverless-adapter/lib/resolvers/aws-context';\n\nconst express = require('express');\n\nconst app = express();\nexport const handler = ServerlessAdapter.new(app)\n  .setResolver(new AwsContextResolver())\n  // continue to set the other options here.\n  //.setFramework(new ExpressFramework())\n  //.setHandler(new DefaultHandler())\n  //.addAdapter(new AlbAdapter())\n  //.addAdapter(new SQSAdapter())\n  //.addAdapter(new SNSAdapter())\n  // after put all methods necessary, just call the build method.\n  .build();\n")))}m.isMDXComponent=!0}}]);